{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    username: null,\n    token: null,\n    first_name: null,\n    last_name: null,\n    userId: null\n  },\n  reducers: {\n    authSuccess: (state, action) => {\n      state.username = action.payload.username;\n      state.token = action.payload.token;\n      state.last_name = action.payload.last_name;\n      state.first_name = action.payload.first_name;\n      state.userId = action.payload.userId;\n    },\n    checkAuthTimeout: (state, action) => {\n      console.log(\"expirationDate\");\n    },\n    logout: state => {\n      state.user = null;\n    }\n  }\n});\nexport const {\n  login,\n  logout\n} = userSlice.actions;\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    axios.post(\"http://127.0.0.1:8000/rest-auth/login/\", {\n      username: username,\n      password: password\n    }).then(res => {\n      console.log(res.data);\n      const user = {\n        token: res.data.key,\n        username,\n        last_name: res.data.user_detail.last_name,\n        first_name: res.data.user_detail.first_name,\n        userId: res.data.user_detail.userId\n      };\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      dispatch(authSuccess(user));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport default userSlice.reducer;","map":{"version":3,"sources":["C:/Users/Raivex/Documents/React/Project/gui/src/features/userSlice.js"],"names":["createSlice","userSlice","name","initialState","username","token","first_name","last_name","userId","reducers","authSuccess","state","action","payload","checkAuthTimeout","console","log","logout","user","login","actions","authLogin","password","dispatch","axios","post","then","res","data","key","user_detail","localStorage","setItem","JSON","stringify","catch","err","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AAEA,OAAO,MAAMC,SAAS,GAAGD,WAAW,CAAC;AACnCE,EAAAA,IAAI,EAAE,MAD6B;AAEnCC,EAAAA,YAAY,EAAE;AACZC,IAAAA,QAAQ,EAAE,IADE;AAEZC,IAAAA,KAAK,EAAE,IAFK;AAGZC,IAAAA,UAAU,EAAE,IAHA;AAIZC,IAAAA,SAAS,EAAE,IAJC;AAKZC,IAAAA,MAAM,EAAE;AALI,GAFqB;AASnCC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC9BD,MAAAA,KAAK,CAACP,QAAN,GAAiBQ,MAAM,CAACC,OAAP,CAAeT,QAAhC;AACAO,MAAAA,KAAK,CAACN,KAAN,GAAcO,MAAM,CAACC,OAAP,CAAeR,KAA7B;AACAM,MAAAA,KAAK,CAACJ,SAAN,GAAkBK,MAAM,CAACC,OAAP,CAAeN,SAAjC;AACAI,MAAAA,KAAK,CAACL,UAAN,GAAmBM,MAAM,CAACC,OAAP,CAAeP,UAAlC;AACAK,MAAAA,KAAK,CAACH,MAAN,GAAeI,MAAM,CAACC,OAAP,CAAeL,MAA9B;AACD,KAPO;AAQRM,IAAAA,gBAAgB,EAAE,CAACH,KAAD,EAAQC,MAAR,KAAmB;AACnCG,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,KAVO;AAWRC,IAAAA,MAAM,EAAGN,KAAD,IAAW;AACjBA,MAAAA,KAAK,CAACO,IAAN,GAAa,IAAb;AACD;AAbO;AATyB,CAAD,CAA7B;AA0BP,OAAO,MAAM;AAAEC,EAAAA,KAAF;AAASF,EAAAA;AAAT,IAAoBhB,SAAS,CAACmB,OAApC;AAEP,OAAO,MAAMC,SAAS,GAAG,CAACjB,QAAD,EAAWkB,QAAX,KAAwB;AAC/C,SAAQC,QAAD,IAAc;AACnBC,IAAAA,KAAK,CACFC,IADH,CACQ,wCADR,EACkD;AAC9CrB,MAAAA,QAAQ,EAAEA,QADoC;AAE9CkB,MAAAA,QAAQ,EAAEA;AAFoC,KADlD,EAKGI,IALH,CAKSC,GAAD,IAAS;AACbZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACC,IAAhB;AACA,YAAMV,IAAI,GAAG;AACXb,QAAAA,KAAK,EAAEsB,GAAG,CAACC,IAAJ,CAASC,GADL;AAEXzB,QAAAA,QAFW;AAGXG,QAAAA,SAAS,EAAEoB,GAAG,CAACC,IAAJ,CAASE,WAAT,CAAqBvB,SAHrB;AAIXD,QAAAA,UAAU,EAAEqB,GAAG,CAACC,IAAJ,CAASE,WAAT,CAAqBxB,UAJtB;AAKXE,QAAAA,MAAM,EAAEmB,GAAG,CAACC,IAAJ,CAASE,WAAT,CAAqBtB;AALlB,OAAb;AAOAuB,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAehB,IAAf,CAA7B;AACAK,MAAAA,QAAQ,CAACb,WAAW,CAACQ,IAAD,CAAZ,CAAR;AACD,KAhBH,EAiBGiB,KAjBH,CAiBUC,GAAD,IAAS;AACdrB,MAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACD,KAnBH;AAoBD,GArBD;AAsBD,CAvBM;AAyBP,eAAenC,SAAS,CAACoC,OAAzB","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState: {\r\n    username: null,\r\n    token: null,\r\n    first_name: null,\r\n    last_name: null,\r\n    userId: null,\r\n  },\r\n  reducers: {\r\n    authSuccess: (state, action) => {\r\n      state.username = action.payload.username;\r\n      state.token = action.payload.token;\r\n      state.last_name = action.payload.last_name;\r\n      state.first_name = action.payload.first_name;\r\n      state.userId = action.payload.userId;\r\n    },\r\n    checkAuthTimeout: (state, action) => {\r\n      console.log(\"expirationDate\");\r\n    },\r\n    logout: (state) => {\r\n      state.user = null;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { login, logout } = userSlice.actions;\r\n\r\nexport const authLogin = (username, password) => {\r\n  return (dispatch) => {\r\n    axios\r\n      .post(\"http://127.0.0.1:8000/rest-auth/login/\", {\r\n        username: username,\r\n        password: password,\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        const user = {\r\n          token: res.data.key,\r\n          username,\r\n          last_name: res.data.user_detail.last_name,\r\n          first_name: res.data.user_detail.first_name,\r\n          userId: res.data.user_detail.userId,\r\n        };\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        dispatch(authSuccess(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n\r\nexport default userSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}