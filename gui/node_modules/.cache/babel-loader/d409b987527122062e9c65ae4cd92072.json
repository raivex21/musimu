{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Raivex\\\\Documents\\\\React\\\\Project\\\\gui\\\\src\\\\containers\\\\Module.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport { Avatar, Button, CircularProgress, FormControl, InputLabel, MenuItem, Select, TextField, Typography, useRadioGroup } from \"@material-ui/core\";\nimport FolderIcon from \"@material-ui/icons/Folder\";\nimport { getModules } from \"../features/moduleSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport SystemUpdateAltIcon from \"@material-ui/icons/SystemUpdateAlt\";\nimport { getGradeLevel } from \"../features/schoolSlice\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { createModule } from \"../features/moduleSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    minWidth: \"50%\",\n    margin: \"10px 0\"\n  },\n  textField: {\n    minWidth: \"100%\",\n    margin: \"10px 0\"\n  },\n  buttonStyle: {\n    minWidth: \"100%\",\n    margin: \"10px 0\",\n    height: \"3rem\"\n  }\n}));\n\nfunction Module() {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const {\n    token,\n    userId,\n    is_teacher\n  } = useSelector(state => state.auth);\n  const {\n    modules,\n    loading,\n    error\n  } = useSelector(state => state.modules);\n  const [name, setName] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const [level, setLevel] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const levels = useSelector(state => state.school.gradeLevel);\n  useEffect(() => {\n    dispatch(getModules(token));\n    dispatch(getGradeLevel(token));\n  }, [token, dispatch]);\n\n  const handleChange = event => {\n    setLevel(event.target.value);\n  };\n\n  const upload = e => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleName = e => {\n    setName(e.target.value);\n  };\n\n  const handleDesc = e => {\n    setDesc(e.target.value);\n  };\n\n  const handleSearch = e => {\n    setSearch(e.target.value);\n  };\n\n  const uploadModule = () => {\n    // const formData = {\n    //   name: name,\n    //   description: desc,\n    //   module: file,\n    //   level: level,\n    //   uploader: userId,\n    // };\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"description\", desc);\n    formData.append(\"module\", file);\n    formData.append(\"level\", level);\n    formData.append(\"uploader\", userId);\n    dispatch(createModule(token, formData));\n  };\n\n  console.log(file);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modules\",\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        id: \"outlined-basic\",\n        label: \"Search Module\",\n        variant: \"outlined\",\n        className: classes.textField,\n        onChange: handleSearch,\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), modules === null || modules === void 0 ? void 0 : modules.filter(item => {\n        if (item.name === \"\") {\n          return item;\n        } else if (item.name.toLowerCase().includes(search.toLowerCase())) {\n          return item;\n        } else {\n          return null;\n        }\n      }).map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"module__item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"module__name\",\n            children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n              children: /*#__PURE__*/_jsxDEV(Avatar, {\n                children: /*#__PURE__*/_jsxDEV(FolderIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"module__detail\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"module__link\",\n              children: [/*#__PURE__*/_jsxDEV(SystemUpdateAltIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `${item.module}`,\n                children: \"Download\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Date uploaded:\", item.created]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this);\n      })]\n    }, void 0, true), is_teacher && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"module__upload\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"Upload Module\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload__input\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-basic\",\n          label: \"Quiz Title\",\n          variant: \"outlined\",\n          className: classes.textField,\n          onChange: handleName,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"desc\",\n          label: \"Description\",\n          variant: \"outlined\",\n          multiline: true,\n          className: classes.textField,\n          onChange: handleDesc,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"outlined\",\n          className: classes.formControl,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"select-outlined-label\",\n            children: \"Grade Level\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            size: \"small\",\n            color: \"primary\",\n            labelId: \"select-outlined-label\",\n            id: \"select-outlined\",\n            value: level,\n            onChange: handleChange,\n            label: \"Grade Level\",\n            children: levels === null || levels === void 0 ? void 0 : levels.map(item => {\n              return /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: item.id,\n                children: item.name\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"module__file\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: upload,\n            type: \"file\",\n            name: \"module\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.buttonStyle,\n          onClick: uploadModule,\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Module, \"Gd5jZ36iTBL2KnvCNITJnQMneoQ=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Module;\nexport default Module;\n\nvar _c;\n\n$RefreshReg$(_c, \"Module\");","map":{"version":3,"sources":["C:/Users/Raivex/Documents/React/Project/gui/src/containers/Module.js"],"names":["React","useEffect","useState","ListItemAvatar","Avatar","Button","CircularProgress","FormControl","InputLabel","MenuItem","Select","TextField","Typography","useRadioGroup","FolderIcon","getModules","useDispatch","useSelector","SystemUpdateAltIcon","getGradeLevel","makeStyles","createModule","useStyles","theme","formControl","minWidth","margin","textField","buttonStyle","height","Module","classes","dispatch","token","userId","is_teacher","state","auth","modules","loading","error","name","setName","file","setFile","level","setLevel","desc","setDesc","search","setSearch","levels","school","gradeLevel","handleChange","event","target","value","upload","e","files","handleName","handleDesc","handleSearch","uploadModule","formData","FormData","append","console","log","filter","item","toLowerCase","includes","map","module","created","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CircularProgress,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  useRadioGroup,\r\n} from \"@material-ui/core\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport { getModules } from \"../features/moduleSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport SystemUpdateAltIcon from \"@material-ui/icons/SystemUpdateAlt\";\r\nimport { getGradeLevel } from \"../features/schoolSlice\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { createModule } from \"../features/moduleSlice\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"50%\",\r\n    margin: \"10px 0\",\r\n  },\r\n  textField: {\r\n    minWidth: \"100%\",\r\n    margin: \"10px 0\",\r\n  },\r\n  buttonStyle: {\r\n    minWidth: \"100%\",\r\n    margin: \"10px 0\",\r\n    height: \"3rem\",\r\n  },\r\n}));\r\n\r\nfunction Module() {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const { token, userId, is_teacher } = useSelector((state) => state.auth);\r\n  const { modules, loading, error } = useSelector((state) => state.modules);\r\n  const [name, setName] = useState(\"\");\r\n  const [file, setFile] = useState(null);\r\n  const [level, setLevel] = useState(\"\");\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const levels = useSelector((state) => state.school.gradeLevel);\r\n  useEffect(() => {\r\n    dispatch(getModules(token));\r\n    dispatch(getGradeLevel(token));\r\n  }, [token, dispatch]);\r\n  const handleChange = (event) => {\r\n    setLevel(event.target.value);\r\n  };\r\n  const upload = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleName = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleDesc = (e) => {\r\n    setDesc(e.target.value);\r\n  };\r\n  const handleSearch = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  const uploadModule = () => {\r\n    // const formData = {\r\n    //   name: name,\r\n    //   description: desc,\r\n    //   module: file,\r\n    //   level: level,\r\n    //   uploader: userId,\r\n    // };\r\n    const formData = new FormData();\r\n    formData.append(\"name\", name);\r\n    formData.append(\"description\", desc);\r\n    formData.append(\"module\", file);\r\n    formData.append(\"level\", level);\r\n    formData.append(\"uploader\", userId);\r\n    dispatch(createModule(token, formData));\r\n  };\r\n\r\n  console.log(file);\r\n\r\n  return (\r\n    <div className=\"modules\">\r\n      {loading ? (\r\n        <div className=\"loading\">\r\n          <CircularProgress color=\"secondary\" />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <TextField\r\n            id=\"outlined-basic\"\r\n            label=\"Search Module\"\r\n            variant=\"outlined\"\r\n            className={classes.textField}\r\n            onChange={handleSearch}\r\n            size=\"small\"\r\n          />\r\n          {modules\r\n            ?.filter((item) => {\r\n              if (item.name === \"\") {\r\n                return item;\r\n              } else if (\r\n                item.name.toLowerCase().includes(search.toLowerCase())\r\n              ) {\r\n                return item;\r\n              } else {\r\n                return null;\r\n              }\r\n            })\r\n            .map((item) => {\r\n              return (\r\n                <div className=\"module__item\">\r\n                  <div className=\"module__name\">\r\n                    <ListItemAvatar>\r\n                      <Avatar>\r\n                        <FolderIcon />\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    <p>\r\n                      <strong>{item.name}</strong>\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"module__detail\">\r\n                    <div className=\"module__link\">\r\n                      <SystemUpdateAltIcon />\r\n                      <a href={`${item.module}`}>Download</a>\r\n                    </div>\r\n                    <p>Date uploaded:{item.created}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n        </>\r\n      )}\r\n      {is_teacher && (\r\n        <div className=\"module__upload\">\r\n          <Typography variant=\"h6\">Upload Module</Typography>\r\n          <div className=\"upload__input\">\r\n            <TextField\r\n              id=\"outlined-basic\"\r\n              label=\"Quiz Title\"\r\n              variant=\"outlined\"\r\n              className={classes.textField}\r\n              onChange={handleName}\r\n              size=\"small\"\r\n            />\r\n            <TextField\r\n              id=\"desc\"\r\n              label=\"Description\"\r\n              variant=\"outlined\"\r\n              multiline\r\n              className={classes.textField}\r\n              onChange={handleDesc}\r\n              size=\"small\"\r\n            />\r\n            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n              <InputLabel id=\"select-outlined-label\">Grade Level</InputLabel>\r\n              <Select\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                labelId=\"select-outlined-label\"\r\n                id=\"select-outlined\"\r\n                value={level}\r\n                onChange={handleChange}\r\n                label=\"Grade Level\"\r\n              >\r\n                {levels?.map((item) => {\r\n                  return (\r\n                    <MenuItem key={item.id} value={item.id}>\r\n                      {item.name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n            <div className=\"module__file\">\r\n              <input onChange={upload} type=\"file\" name=\"module\" />\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.buttonStyle}\r\n              onClick={uploadModule}\r\n            >\r\n              Upload\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Module;\r\n"]},"metadata":{},"sourceType":"module"}